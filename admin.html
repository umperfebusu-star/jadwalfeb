<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Admin Jadwal</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
    body {
        margin: 0;
        background: #0f1a28;
        font-family: "Inter", sans-serif;
        color: white;
    }

    header {
        background: #1a2d4a;
        padding: 20px;
        font-size: 22px;
        font-weight: 700;
    }

    .container {
        padding: 20px;
        max-width: 900px;
        margin: auto;
    }

    input, select {
        width: 100%;
        padding: 14px;
        margin-bottom: 12px;
        border-radius: 10px;
        background: #1d2b3f;
        border: 1px solid #394b63;
        color: white;
    }

    .card {
        background: #142233;
        padding: 18px;
        border-radius: 14px;
        margin-bottom: 14px;
        border: 1px solid #23364e;
        position: relative;
    }

    .card h3 {
        margin: 6px 0;
        font-size: 18px;
        font-weight: 700;
    }

    .card small {
        opacity: 0.8;
    }

    .menu-btn {
        position: absolute;
        right: 10px;
        top: 10px;
        background: transparent;
        border: none;
        color: white;
        font-size: 20px;
        cursor: pointer;
    }

    .menu-popup {
        position: absolute;
        right: 10px;
        top: 40px;
        background: #1d2b3f;
        border-radius: 8px;
        border: 1px solid #34465a;
        display: none;
        min-width: 120px;
        z-index: 10;
    }

    .menu-popup div {
        padding: 10px 12px;
        cursor: pointer;
        font-size: 14px;
        border-bottom: 1px solid #2e3e52;
    }

    .menu-popup div:hover {
        background: #223347;
    }

    .add-btn {
        position: fixed;
        right: 25px;
        bottom: 25px;
        width: 55px;
        height: 55px;
        border-radius: 50%;
        background: #3558ff;
        color: white;
        border: none;
        font-size: 30px;
        cursor: pointer;
    }
</style>

</head>
<body>

<header>Admin Jadwal</header>

<div class="container">

    <input type="text" id="search" placeholder="Cari kegiatan atau tempat...">

    <select id="filterHari">
        <option value="">Semua Hari</option>
        <option>Senin</option>
        <option>Selasa</option>
        <option>Rabu</option>
        <option>Kamis</option>
        <option>Jumat</option>
        <option>Sabtu</option>
        <option>Minggu</option>
    </select>

    <select id="filterTempat">
        <option value="">Semua Tempat</option>
    </select>

    <div id="list"></div>
</div>

<button class="add-btn" onclick="tambahData()">+</button>

<script>
    // ==== DATA CONTOH, bisa diganti dari API ====
    let data = [
        {"hari":"JUMAT","tanggal":"2025-11-28","waktu_mulai":"9:00","waktu_selesai":"SELESAI","kegiatan":"UJIAN KOMPREHENSIF S1 MANAJEMEN","tempat":"LAB KOMPUTER"},
        {"hari":"Selasa","tanggal":"2025-11-25","waktu_mulai":"7:00","waktu_selesai":"SELESAI","kegiatan":"RAPAT DOSEN S1 MANAJEMEN","tempat":"RUANG RAPAT DOSEN"},
        {"hari":"Kamis","tanggal":"2025-11-27","waktu_mulai":"8:30","waktu_selesai":"SELESAI","kegiatan":"SEMINAR NASIONAL","tempat":"AULA SUHADJI HADIBROTO"},
        {"hari":"Jumat","tanggal":"2025-11-28","waktu_mulai":"11:00","waktu_selesai":"14","kegiatan":"WORKSHOP","tempat":"AULA MIKIE WIJAYA"}
    ];

    const list = document.getElementById("list");
    const filterHari = document.getElementById("filterHari");
    const filterTempat = document.getElementById("filterTempat");
    const search = document.getElementById("search");

    function loadTempat() {
        let tempatList = [...new Set(data.map(d => d.tempat))];
        tempatList.forEach(t => {
            filterTempat.innerHTML += `<option>${t}</option>`;
        });
    }

    function tampilkan() {
        list.innerHTML = "";

        let key = search.value.toLowerCase();
        let h = filterHari.value;
        let t = filterTempat.value;

        let filtered = data.filter(d =>
            (h === "" || d.hari.toLowerCase() === h.toLowerCase()) &&
            (t === "" || d.tempat === t) &&
            (d.kegiatan.toLowerCase().includes(key) || d.tempat.toLowerCase().includes(key))
        );

        filtered.forEach((d, i) => {
            let card = document.createElement("div");
            card.className = "card";
            card.innerHTML = `
                <button class="menu-btn" onclick="toggleMenu(${i})">‚ãÆ</button>
                <div class="menu-popup" id="menu-${i}">
                    <div onclick="editData(${i})">‚úè Edit</div>
                    <div onclick="hapusData(${i})">üóë Hapus</div>
                </div>

                <small>${d.tanggal}</small><br>
                <small>${d.waktu_mulai} - ${d.waktu_selesai}</small>
                <h3>${d.kegiatan}</h3>
                <small>üìç ${d.tempat}</small>
            `;

            list.appendChild(card);
        });
    }

    function toggleMenu(i) {
        document.querySelectorAll(".menu-popup").forEach(m => m.style.display = "none");
        let m = document.getElementById("menu-" + i);
        m.style.display = (m.style.display === "block") ? "none" : "block";
    }

    function editData(i) {
        alert("Edit data index " + i);
        // Di sini nanti diarahkan ke form edit
    }

    function hapusData(i) {
        if (confirm("Yakin ingin menghapus data?")) {
            data.splice(i, 1);
            tampilkan();
        }
    }

    function tambahData() {
        alert("Buka form tambah data‚Ä¶");
    }

    document.addEventListener("click", function(e) {
        if (!e.target.classList.contains("menu-btn")) {
            document.querySelectorAll(".menu-popup").forEach(m => m.style.display = "none");
        }
    });

    loadTempat();
    tampilkan();

    search.oninput = tampilkan;
    filterHari.onchange = tampilkan;
    filterTempat.onchange = tampilkan;
</script>

</body>
</html>
